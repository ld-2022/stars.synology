<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bootstrap demo</title>
        <link rel="stylesheet" href="/css/bootstrap.min.css">
    </head>
    <body>
        <div class="container">
            <div class="mb-3">
                <label for="ssh-port" class="form-label">群辉账号：</label>
                <input type="text" class="form-control" id="ssh-username" placeholder="输入群辉账号">
            </div>
            <div class="mb-3">
                <label for="ssh-port" class="form-label">群辉密码：</label>
                <input type="password" class="form-control" id="ssh-password" placeholder="输入群辉密码">
            </div>
            <div class="mb-3">
                <label for="ssh-port" class="form-label">SSH 端口：</label>
                <input type="number" class="form-control" id="ssh-port" placeholder="默认是22，如果没有修改不用填">
            </div>
            <div class="mb-3">
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" type="button" onclick="install()">安装 星空</button>
                    <button class="btn btn-primary" type="button" onclick="unInstall()">卸载 星空</button>
                    <button class="btn btn-primary" type="button" onclick="checkStatus()">查看状态 星空</button>
                </div>
            </div>
        </div>

    </body>
    <script src="/js/jquery-3.7.0.min.js"></script>
    <script>
        function checkStatus() {
            var sshUsername = $('#ssh-username').val();
            var sshPassword = $('#ssh-password').val();
            var sshPort = $('#ssh-port').val();
            $.post(
                "/open/v1/status",
                {
                    ssh_username: sshUsername,
                    ssh_password: sshPassword,
                    ssh_port: sshPort,
                },
                function (data) {
                    console.log(data);
                }
            )
        }
        function install() {
            var sshUsername = $('#ssh-username').val();
            var sshPassword = $('#ssh-password').val();
            var sshPort = $('#ssh-port').val();
            $.post(
                "/open/v1/install",
                {
                    ssh_username: sshUsername,
                    ssh_password: sshPassword,
                    ssh_port: sshPort,
                },
                function (data) {
                    console.log(data);
                }
            )
        }
        function unInstall() {
            var sshUsername = $('#ssh-username').val();
            var sshPassword = $('#ssh-password').val();
            var sshPort = $('#ssh-port').val();
            $.post(
                "/open/v1/uninstall",
                {
                    ssh_username: sshUsername,
                    ssh_password: sshPassword,
                    ssh_port: sshPort,
                },
                function (data) {
                    console.log(data);
                }
            )
        }
    </script>
</html>